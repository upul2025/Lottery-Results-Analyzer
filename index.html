<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lottery Results Analyzer ‚Äî Mobile Friendly</title>
  <style>
    :root{
      --bg:#0f1720;
      --card:#0b1220;
      --muted:#94a3b8;
      --accent:#ff6b6b;
      --glass: rgba(255,255,255,0.04);
      --radius:14px;
      --max-width:980px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(180deg,#071022 0%, #0f1720 100%);
      color: #e6eef8;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:20px;
      display:flex;
      justify-content:center;
    }

    .app{
      width:100%;
      max-width:var(--max-width);
    }

    header{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:16px;
    }
    header h1{
      font-size:20px;
      margin:0;
      line-height:1;
      letter-spacing:0.2px;
    }
    header p{ margin:0; color:var(--muted); font-size:13px; }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:var(--radius);
      padding:14px;
      box-shadow: 0 6px 18px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.03);
      margin-bottom:14px;
    }

    /* Input grid */
    .inputs{
      display:grid;
      grid-template-columns: repeat(6,1fr);
      gap:10px;
    }
    .inputs input{
      width:100%;
      padding:12px 10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.02);
      color: #e6eef8;
      font-size:16px;
      text-align:center;
      outline:none;
    }
    .controls{
      display:flex;
      gap:10px;
      margin-top:12px;
      align-items:center;
      flex-wrap:wrap;
    }
    .btn{
      background: linear-gradient(90deg,var(--accent), #ff8a80);
      border:none;
      color:#071022;
      padding:10px 14px;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
      box-shadow: 0 6px 18px rgba(255,107,107,0.12);
    }
    .btn:active{ transform: translateY(1px) }
    .small{
      font-size:13px;
      color:var(--muted);
      background:transparent;
      border:1px dashed rgba(255,255,255,0.03);
      padding:8px 10px;
      border-radius:8px;
    }

    /* Results area */
    #resultsHeader{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }
    #matches{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    /* Box card */
    .box-card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:12px;
      border:1px solid rgba(255,255,255,0.03);
      display:block;
    }
    .box-title{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:8px;
    }
    .box-title h3{
      margin:0; font-size:15px;
    }
    .match-list{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    /* each match row */
    .match{
      display:flex;
      gap:12px;
      align-items:center;
      background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.02);
      flex-wrap:wrap;
    }
    .match .meta{
      min-width:120px;
      font-size:13px;
      color:var(--muted);
    }
    .match .meta b{ color:#fff; display:block; font-size:14px }
    .match .below{
      padding:8px 10px;
      border-radius:8px;
      background: rgba(255,255,255,0.02);
      border:1px solid rgba(255,255,255,0.02);
      font-size:13px;
      color:var(--muted);
    }
    .no-match{
      color:var(--muted);
      font-size:14px;
      padding:10px;
    }

    /* responsive table showing all records (scrollable horizontally on mobile) */
    .table-wrap{
      overflow:auto;
      border-radius:10px;
      margin-top:10px;
      border:1px solid rgba(255,255,255,0.03);
    }
    table{
      width:100%;
      border-collapse:collapse;
      min-width:680px;
    }
    th,td{
      padding:10px 8px;
      text-align:center;
      font-size:13px;
      border-bottom:1px dashed rgba(255,255,255,0.02);
    }
    th{
      background: rgba(255,255,255,0.03);
      color:var(--muted);
      font-weight:600;
    }

    /* small screens adjustments */
    @media (max-width:760px){
      .inputs{ grid-template-columns: repeat(3,1fr); }
      header h1{ font-size:18px; }
      .match .meta{ min-width:100px; font-size:12px }
      .match .below{ font-size:12px; }
    }
    @media (max-width:420px){
      .inputs{ grid-template-columns: repeat(2,1fr); gap:8px; }
      .controls{ flex-direction:column; align-items:stretch; }
      .btn{ width:100% }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Lottery Results Analyzer</h1>
        <p>‡∂î‡∂∂ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂± last-2 ‡∂Ö‡∂Ç‡∂ö ‡∑É‡∂≥‡∑Ñ‡∑è ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂ú‡∑ê‡∂Ω‡∂¥‡∑ì‡∂∏‡∑ä ‡∑É‡∑Ñ ‡∂í‡∑Ä‡∑è‡∂ß ‡∂Ö‡∂±‡∑î‡∂ª‡∑ñ‡∂¥ ‡∂¥‡∑Ñ‡∑Ö draw-‡∑Ä‡∂Ω ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂∫‡∑í (‡∂¢‡∂Ç‡∂ú‡∂∏ ‡∑Ñ‡∑í‡∂≠‡∑õ‡∑Å‡∑ì).</p>
      </div>
    </header>

    <section class="card">
      <div class="inputs" id="inputGrid">
        <input id="box1" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Box 1">
        <input id="box2" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Box 2">
        <input id="box3" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Box 3">
        <input id="box4" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Box 4">
        <input id="box5" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Box 5">
        <input id="box6" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Box 6">
      </div>

      <div class="controls" style="margin-top:12px;">
        <button class="btn" id="analyzeBtn">üîç ‡∑Ä‡∑í‡∑Å‡∑ä‡∂Ω‡∑ö‡∑Ç‡∂´‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
        <button class="small" id="resetBtn">‚ôªÔ∏è ‡∑Ñ‡∑í‡∑É‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
        <div style="flex:1"></div>
        <div style="color:var(--muted); font-size:13px">JSON: <code style="color:#cbd5e1">lottery_records.json</code></div>
      </div>
    </section>

    <section id="resultsArea">
      <div id="resultsHeader" style="margin-top:6px;">
        <h2 style="margin:0; font-size:16px">‡∑Ä‡∑í‡∑Å‡∑ä‡∂Ω‡∑ö‡∑Ç‡∂´ ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω</h2>
        <div style="color:var(--muted); font-size:13px">‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂ú‡∑ê‡∂Ω‡∂¥‡∑ì‡∂∏‡∑ä ‡∑É‡∑Ñ ‡∂¥‡∑Ñ‡∑Ö draw</div>
      </div>

      <div id="matches" class="card">
        <div class="no-match">‡∑Ä‡∂ö‡∑ä‚Äç‡∂ª‡∑ì-‡∂¥‡∂Ø‡∑ä‡∂∞‡∂≠‡∑í‡∂∫ ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä ‚Äî ‡∂Ö‡∂ú‡∂∫‡∂±‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª "‡∑Ä‡∑í‡∑Å‡∑ä‡∂Ω‡∑ö‡∑Ç‡∂´‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±" ‡∂î‡∂∂‡∂±‡∑ä‡∂±.</div>
      </div>
    </section>

    <section class="card" style="margin-top:10px;">
      <h3 style="margin:0 0 8px 0">‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂Ω‡∑ú‡∂≠‡∂ª‡∑ê‡∂∫‡∑í ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω (Raw JSON Table)</h3>
      <div class="table-wrap">
        <table id="dataTable" aria-label="All lottery records">
          <thead>
            <tr><th>#</th><th>‡∂Ø‡∑í‡∂±‡∂∫</th><th>‡∂ö‡∑ö‡∂≠‡∂∫</th><th>‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä 2</th><th>6 ‡∂Ö‡∂Ç‡∂ö</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </div>

  <script>
    // main data holder
    let lotteryData = [];

    // configuration: offsets per box (same as before; adjust if you want)
    const offsets = [1,2,3,1,4,6];

    // load JSON
    fetch("lottery_records.json")
      .then(r => r.json())
      .then(data => {
        lotteryData = data.map((d, i) => ({
          ...d,
          last2: String(d.last2).padStart(2,"0"),
          _parsedDate: d.date ? new Date(d.date) : null,
          _idx: i
        })).sort((a,b) => {
          if (!a._parsedDate || !b._parsedDate) return 0;
          return a._parsedDate - b._parsedDate; // ‡∂¥‡∂ª‡∂´ ‚Üí ‡∂±‡∑Ä
        });

        // reassign indices after sort
        lotteryData.forEach((r, i) => r._idx = i);

        renderTable();
      })
      .catch(err => {
        console.error("Error loading JSON:", err);
        document.querySelector("#matches").innerHTML = '<div class="no-match">lottery_records.json load ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‚Äî Console ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±.</div>';
      });

    // render raw table
    function renderTable(){
      const tbody = document.querySelector("#dataTable tbody");
      tbody.innerHTML = "";
      lotteryData.forEach((r,i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${i+1}</td><td>${r.date ?? "-"}</td><td>${r.code ?? "-"}</td><td>${r.last2 ?? "-"}</td><td>${r.digits6 ?? "-"}</td>`;
        tbody.appendChild(tr);
      });
    }

    // helpers
    function getInputValues(){
      const vals = [];
      for(let i=1;i<=6;i++){
        const v = document.getElementById("box"+i).value.trim();
        if(v === "") return null; // require all filled (same as previous behaviour)
        vals.push(String(v).padStart(2,"0"));
      }
      return vals;
    }

    function buildResults(inputs){
      // for each input, find ALL matches (could be multiple years)
      const container = document.createElement("div");
      container.style.display = "flex";
      container.style.flexDirection = "column";
      container.style.gap = "12px";

      inputs.forEach((val, idx) => {
        const boxCard = document.createElement("div");
        boxCard.className = "box-card";

        const title = document.createElement("div");
        title.className = "box-title";
        title.innerHTML = `<h3>Box ${idx+1} ‚Äî <span style="color:var(--accent)">${val}</span></h3>
                           <div style="font-size:13px;color:var(--muted)">offset: ${offsets[idx]}</div>`;
        boxCard.appendChild(title);

        const matches = lotteryData
          .filter(r => r.last2 === val)
          .map(r => ({...r}));

        if(matches.length === 0){
          const no = document.createElement("div");
          no.className = "no-match";
          no.textContent = "‡∂ú‡∑ê‡∂Ω‡∂¥‡∑ì‡∂∏‡∂ö‡∑ä ‡∂±‡∑ú‡∂∏‡∑í‡∂Ω‡∑ö.";
          boxCard.appendChild(no);
        } else {
          const list = document.createElement("div");
          list.className = "match-list";

          matches.forEach(m => {
            const row = document.createElement("div");
            row.className = "match";

            const meta = document.createElement("div");
            meta.className = "meta";
            meta.innerHTML = `<b>${m.date ?? "-"}</b><span style="color:var(--muted)">${m.code ?? "-"}</span><div style="margin-top:6px;color:var(--muted);font-size:12px">index: ${m._idx}</div>`;

            const center = document.createElement("div");
            center.style.flex = "1";
            center.innerHTML = `<div style="font-size:15px"><strong>last2:</strong> ${m.last2}</div>
                                <div style="color:var(--muted);font-size:13px;margin-top:6px">6-digit: ${m.digits6 ?? "-"}</div>`;

            const lookIndex = m._idx + offsets[idx];
            const belowDiv = document.createElement("div");
            belowDiv.className = "below";

            if(lookIndex < lotteryData.length){
              const below = lotteryData[lookIndex];
              belowDiv.innerHTML = `<div style="font-weight:600">${below.date ?? "-"}</div><div style="font-size:13px;color:var(--muted)">${below.code ?? "-"} ‚Äî last2: ${below.last2 ?? "-"}</div>`;
            } else {
              belowDiv.textContent = "‡∂¥‡∑Ñ‡∑Ö draw ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂±‡∑ú‡∂∏‡∑ê‡∂≠";
            }

            row.appendChild(meta);
            row.appendChild(center);
            row.appendChild(belowDiv);

            list.appendChild(row);
          });

          boxCard.appendChild(list);
        }

        container.appendChild(boxCard);
      });

      return container;
    }

    // events
    document.getElementById("analyzeBtn").addEventListener("click", () => {
      const inputs = getInputValues();
      if(!inputs){
        alert("‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ Box ‡∂¥‡∑ô‡∂ª‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (6) ‚Äî ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫‡∂∫‡∑í.");
        return;
      }

      const resultsNode = buildResults(inputs);
      const matches = document.getElementById("matches");
      matches.innerHTML = "";
      matches.appendChild(resultsNode);

      // scroll to results (mobile friendly)
      window.scrollTo({ top: matches.getBoundingClientRect().top + window.scrollY - 20, behavior: 'smooth' });
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      for(let i=1;i<=6;i++) document.getElementById("box"+i).value = "";
      document.getElementById("matches").innerHTML = '<div class="no-match">‡∑Ä‡∂ö‡∑ä‚Äç‡∂ª‡∑ì-‡∂¥‡∂Ø‡∑ä‡∂∞‡∂≠‡∑í‡∂∫ ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä ‚Äî ‡∂Ö‡∂ú‡∂∫‡∂±‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª "‡∑Ä‡∑í‡∑Å‡∑ä‡∂Ω‡∑ö‡∑Ç‡∂´‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±" ‡∂î‡∂∂‡∂±‡∑ä‡∂±.</div>';
    });

    // small nicety: allow pressing Enter on last input to trigger analyze
    document.getElementById("box6").addEventListener("keydown", (e)=>{
      if(e.key === "Enter") document.getElementById("analyzeBtn").click();
    });
  </script>
</body>
</html>
